<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (routes.index)</title><link rel="stylesheet" href="../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – routes</nav><h1 id="package-routes"><a href="#package-routes" class="anchor"></a>Package routes <span class="version">0.8.0</span> <nav><a type="text/plain; charset=UTF-8" href="_doc-dir/CHANGES.md">changes</a> <a href="https://github.com/anuragsoni/routes/issues">issues</a> <a href="#package_info">more…</a></nav></h1><nav class="toc"><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#installation">Installation</a></li><li><a href="#usage">Usage</a></li></ul></li><li><a href="#support">Support</a></li><li><a href="#license">License</a></li><li><a href="#api-documentation">API documentation</a></li><li><a href="#package_info">Package info</a></li></ul></nav></header><h2 id="introduction"><a href="#introduction" class="anchor"></a>Introduction</h2><p>Routes is a routing library for OCaml that allows defining type safe routes, to dispatch a request to a matching handler, based on path parameters in the input URI target. Type safe in this context, refers to processing the input URI in a manner that assigns concrete types to the values extracted from the path parameters.</p><p>The library has no external dependencies aside from the OCaml standard library, and it can be used in both native (via ocamlopt) and javascript usecases (via js_of_ocaml). It isn't tied to any particular framework, with the intention for frameworks to provide a higher level wrapper around it.</p><h3 id="installation"><a href="#installation" class="anchor"></a>Installation</h3><p>Routes is published on the opam repository. If using opam, install it via</p><p>stable version:</p><pre><code class="ml">opam install routes </code></pre><p>development version:</p><pre><code class="ml">opam pin add routes.dev git+https://github.com/anuragsoni/routes.git </code></pre><p>If using esy, add the dependency <code>@opam/routes</code> to <code>package.json/esy.json</code>. Or you can use <code>esy add @opam/routes</code> to add it to the manifest file automatically.</p><h3 id="usage"><a href="#usage" class="anchor"></a>Usage</h3><pre><code class="ml">let greet_user (name : string) (id : int) =
  Printf.sprintf &quot;Hello, %s [%d]&quot; name id

let add_user (name : string) (id : int) (is_admin : bool) =
  Printf.sprintf &quot;Added user %s with id %d. IsAdmin? %b&quot; name id is_admin

let greet_user_route () = Routes.(s &quot;user&quot; / str / int /? nil)
let add_user_route () = Routes.(s &quot;user&quot; / str / int / bool / s &quot;add&quot; /? nil)

let router = Routes.one_of [ greet_user_route () @--&gt; greet_user
                           ; add_user_route () @--&gt; add_user ]</code></pre><p>Routes ships with patterns that match the following types: int, int32, int64, bool, string, but it is possible to define custom patterns that can be used to extract path parameters that can be parsed into a user defined type.</p><pre><code class="ml">type shape =
  | Square
  | Circle

let shape_of_string = function
  | &quot;square&quot; -&gt; Some Square
  | &quot;circle&quot; -&gt; Some Circle
  | _ -&gt; None

let shape_to_string = function
  | Square -&gt; &quot;square&quot;
  | Circle -&gt; &quot;circle&quot;

let shape = Routes.pattern shape_to_string shape_of_string

(* Now the shape pattern can be used just like any
   of the built in patterns like int, bool etc *)
let route () = s &quot;shape&quot; / shape / s &quot;create&quot; /? nil</code></pre><h2 id="support"><a href="#support" class="anchor"></a>Support</h2><p>Routes' git repository is located on <a href="https://github.com/anuragsoni/routes">Github</a>. Use the repository's <a href="https://github.com/anuragsoni/routes/issues">issue tracker</a> to file bug reports and feature requests.</p><h2 id="license"><a href="#license" class="anchor"></a>License</h2><p>Routes is distributed under the BSD-3-clause license.</p><h2 id="api-documentation"><a href="#api-documentation" class="anchor"></a>API documentation</h2><ul class="modules"><li><a href="Routes/index.html"><code>Routes</code></a></li></ul><h2 id="package_info"><a href="#package_info" class="anchor"></a>Package info</h2><table class="package info"><tr id="info-authors"><td><a href="#info-authors" aria-hidden="true" class="anchor"></a>authors</td><td><ul><li>Anurag Soni &lt;anurag&commat;sonianurag.com&gt;</li></ul></td></tr><tr id="info-changes-files"><td><a href="#info-changes-files" aria-hidden="true" class="anchor"></a>changes-files</td><td><ul><li><a type="text/plain; charset=UTF-8" href="_doc-dir/CHANGES.md">CHANGES.md</a></li></ul></td></tr><tr id="info-depends"><td><a href="#info-depends" aria-hidden="true" class="anchor"></a>depends</td><td><ul><li><a href="../alcotest/index.html">alcotest</a></li><li><a href="../bisect_ppx/index.html">bisect_ppx</a></li><li><a href="../dune/index.html">dune</a></li><li><a href="../mdx/index.html">mdx</a></li><li><a href="../ocaml/index.html">ocaml</a></li></ul></td></tr><tr id="info-homepage"><td><a href="#info-homepage" aria-hidden="true" class="anchor"></a>homepage</td><td><ul><li><a href="https://github.com/anuragsoni/routes">https://github.com/anuragsoni/routes</a></li></ul></td></tr><tr id="info-issues"><td><a href="#info-issues" aria-hidden="true" class="anchor"></a>issues</td><td><ul><li><a href="https://github.com/anuragsoni/routes/issues">https://github.com/anuragsoni/routes/issues</a></li></ul></td></tr><tr id="info-license"><td><a href="#info-license" aria-hidden="true" class="anchor"></a>license</td><td><ul><li>BSD-3-clause</li></ul></td></tr><tr id="info-license-files"><td><a href="#info-license-files" aria-hidden="true" class="anchor"></a>license-files</td><td><ul><li><a type="text/plain; charset=UTF-8" href="_doc-dir/LICENSE">LICENSE</a></li></ul></td></tr><tr id="info-maintainers"><td><a href="#info-maintainers" aria-hidden="true" class="anchor"></a>maintainers</td><td><ul><li>Anurag Soni &lt;anurag&commat;sonianurag.com&gt;</li></ul></td></tr><tr id="info-online-doc"><td><a href="#info-online-doc" aria-hidden="true" class="anchor"></a>online-doc</td><td><ul><li><a href="https://anuragsoni.github.io/routes/">https://anuragsoni.github.io/routes/</a></li></ul></td></tr><tr id="info-readme-files"><td><a href="#info-readme-files" aria-hidden="true" class="anchor"></a>readme-files</td><td><ul><li><a type="text/plain; charset=UTF-8" href="_doc-dir/README.md">README.md</a></li></ul></td></tr><tr id="info-repo"><td><a href="#info-repo" aria-hidden="true" class="anchor"></a>repo</td><td><ul><li>git+https://github.com/anuragsoni/routes.git</li></ul></td></tr><tr id="info-tags"><td><a href="#info-tags" aria-hidden="true" class="anchor"></a>tags</td><td><ul><li><a href="../index.html#tag-http">http</a></li><li><a href="../index.html#tag-router">router</a></li></ul></td></tr><tr id="info-version"><td><a href="#info-version" aria-hidden="true" class="anchor"></a>version</td><td><ul><li>0.8.0</li></ul></td></tr></table></div></body></html>
