<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Piaf__Client (piaf.Piaf__Client)</title><link rel="stylesheet" href="../../odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">piaf</a> &#x00BB; Piaf__Client</nav><h1>Module <code>Piaf__Client</code></h1></header><div class="spec module" id="module-Connection_info"><a href="#module-Connection_info" class="anchor"></a><code><span class="keyword">module</span> Connection_info = <a href="../Piaf__/Connection/index.html#module-Connection_info">Piaf__.Connection.Connection_info</a></code></div><div class="spec module" id="module-Version"><a href="#module-Version" class="anchor"></a><code><span class="keyword">module</span> Version = <a href="../../httpaf/Httpaf/index.html#module-Version">Httpaf.Version</a></code></div><dl><dt class="spec value" id="val-src"><a href="#val-src" class="anchor"></a><code><span class="keyword">val</span> src : <a href="../../logs/Logs/index.html#type-src">Logs.src</a></code></dt></dl><div class="spec module" id="module-Log"><a href="#module-Log" class="anchor"></a><code><span class="keyword">module</span> <a href="Log/index.html">Log</a> : <a href="../../logs/Logs/index.html#module-type-LOG">Logs.LOG</a></code></div><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.conn" class="anchored"><td class="def field"><a href="#type-t.conn" class="anchor"></a><code><span class="keyword">mutable</span> conn : <a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a>;</code></td></tr><tr id="type-t.conn_info" class="anchored"><td class="def field"><a href="#type-t.conn_info" class="anchor"></a><code><span class="keyword">mutable</span> conn_info : <a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a>;</code></td></tr><tr id="type-t.persistent" class="anchored"><td class="def field"><a href="#type-t.persistent" class="anchor"></a><code><span class="keyword">mutable</span> persistent : bool;</code></td></tr><tr id="type-t.uri" class="anchored"><td class="def field"><a href="#type-t.uri" class="anchor"></a><code><span class="keyword">mutable</span> uri : <a href="../Piaf__Util/index.html#module-Uri">Piaf__.Util.Uri</a>.t;</code></td></tr><tr id="type-t.config" class="anchored"><td class="def field"><a href="#type-t.config" class="anchor"></a><code>config : <a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-create_http_connection"><a href="#val-create_http_connection" class="anchor"></a><code><span class="keyword">val</span> create_http_connection : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a>, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> Stdlib.result</span> <a href="../Piaf__Monads/Lwt/index.html#type-t">Piaf__.Monads.Lwt.t</a></span></code></dt><dt class="spec value" id="val-create_https_connection"><a href="#val-create_https_connection" class="anchor"></a><code><span class="keyword">val</span> create_https_connection : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span>&#45;&gt;</span> <span><span>(<a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a>, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-close_connection"><a href="#val-close_connection" class="anchor"></a><code><span class="keyword">val</span> close_connection : <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span>&#45;&gt;</span> <span>unit <a href="../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></dt><dt class="spec value" id="val-connect"><a href="#val-connect" class="anchor"></a><code><span class="keyword">val</span> connect : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span>&#45;&gt;</span> <span><span><span>(unit, <span>[&gt; <span>`Connect_error of string</span> ]</span>)</span> Result.result</span> <a href="../Piaf__Monads/Lwt/index.html#type-t">Piaf__.Monads.Lwt.t</a></span></code></dt><dt class="spec value" id="val-make_impl"><a href="#val-make_impl" class="anchor"></a><code><span class="keyword">val</span> make_impl : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../../lwt/Lwt_unix/index.html#type-file_descr">Lwt_unix.file_descr</a> <span>&#45;&gt;</span> <span><span>(<a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a>, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-open_connection"><a href="#val-open_connection" class="anchor"></a><code><span class="keyword">val</span> open_connection : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a>, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-change_connection"><a href="#val-change_connection" class="anchor"></a><code><span class="keyword">val</span> change_connection : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a> <span>&#45;&gt;</span> <span><span>(unit, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-shutdown_conn"><a href="#val-shutdown_conn" class="anchor"></a><code><span class="keyword">val</span> shutdown_conn : <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a> <span>&#45;&gt;</span> <span>unit <a href="../Piaf__Monads/Lwt/index.html#type-t">Piaf__.Monads.Lwt.t</a></span></code></dt><dt class="spec value" id="val-drain_available_body_bytes_and_shutdown"><a href="#val-drain_available_body_bytes_and_shutdown" class="anchor"></a><code><span class="keyword">val</span> drain_available_body_bytes_and_shutdown : <span>conn_info:<a href="../Piaf__Connection/Connection_info/index.html#type-t">Connection_info.t</a></span> <span>&#45;&gt;</span> <a href="../Piaf__/Connection/index.html#type-t">Piaf__.Connection.t</a> <span>&#45;&gt;</span> <a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-shutdown"><a href="#val-shutdown" class="anchor"></a><code><span class="keyword">val</span> shutdown : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit <a href="../Piaf__Monads/Lwt/index.html#type-t">Piaf__.Monads.Lwt.t</a></span></code></dt><dt class="spec value" id="val-reuse_or_set_up_new_connection"><a href="#val-reuse_or_set_up_new_connection" class="anchor"></a><code><span class="keyword">val</span> reuse_or_set_up_new_connection : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Piaf__Util/index.html#module-Uri">Piaf__.Util.Uri</a>.t <span>&#45;&gt;</span> <span><span><span>(bool, <a href="../Piaf/Error/index.html#type-client">Piaf.Error.client</a>)</span> Result.result</span> <a href="../Piaf__Monads/Lwt/index.html#type-t">Piaf__.Monads.Lwt.t</a></span></code></dt></dl><dl><dt class="spec type" id="type-request_info"><a href="#type-request_info" class="anchor"></a><code><span class="keyword">type</span> request_info</code><code> = </code><code>{</code><table class="record"><tr id="type-request_info.remaining_redirects" class="anchored"><td class="def field"><a href="#type-request_info.remaining_redirects" class="anchor"></a><code>remaining_redirects : int;</code></td></tr><tr id="type-request_info.headers" class="anchored"><td class="def field"><a href="#type-request_info.headers" class="anchor"></a><code>headers : <span><span>(string * string)</span> list</span>;</code></td></tr><tr id="type-request_info.request" class="anchored"><td class="def field"><a href="#type-request_info.request" class="anchor"></a><code>request : <a href="../Piaf/Request/index.html#type-t">Piaf.Request.t</a>;</code></td></tr><tr id="type-request_info.meth" class="anchored"><td class="def field"><a href="#type-request_info.meth" class="anchor"></a><code>meth : H2.Method.t;</code></td></tr><tr id="type-request_info.target" class="anchored"><td class="def field"><a href="#type-request_info.target" class="anchor"></a><code>target : string;</code></td></tr><tr id="type-request_info.is_h2c_upgrade" class="anchored"><td class="def field"><a href="#type-request_info.is_h2c_upgrade" class="anchor"></a><code>is_h2c_upgrade : bool;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-return_response"><a href="#val-return_response" class="anchor"></a><code><span class="keyword">val</span> return_response : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-request_info">request_info</a> <span>&#45;&gt;</span> <a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-is_h2c_upgrade"><a href="#val-is_h2c_upgrade" class="anchor"></a><code><span class="keyword">val</span> is_h2c_upgrade : <span>config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <span>version:<a href="../Piaf/Versions/HTTP/index.html#type-t">Piaf.Versions.HTTP.t</a></span> <span>&#45;&gt;</span> <span>scheme:<a href="../Piaf/Scheme/index.html#type-t">Piaf.Scheme.t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-make_request_info"><a href="#val-make_request_info" class="anchor"></a><code><span class="keyword">val</span> make_request_info : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;remaining_redirects:int</span> <span>&#45;&gt;</span> <span>meth:<a href="../Piaf__/index.html#module-Method">Piaf__.Method</a>.t</span> <span>&#45;&gt;</span> <span>headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-request_info">request_info</a></code></dt><dt class="spec value" id="val-send_request_and_handle_response"><a href="#val-send_request_and_handle_response" class="anchor"></a><code><span class="keyword">val</span> send_request_and_handle_response : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-request_info">request_info</a> <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>?&#8288;config:<a href="../Piaf/Config/index.html#type-t">Piaf.Config.t</a></span> <span>&#45;&gt;</span> <a href="../Piaf__Util/index.html#module-Uri">Piaf__.Util.Uri</a>.t <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-call"><a href="#val-call" class="anchor"></a><code><span class="keyword">val</span> call : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>meth:<a href="../Piaf__/index.html#module-Method">Piaf__.Method</a>.t</span> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-request"><a href="#val-request" class="anchor"></a><code><span class="keyword">val</span> request : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> <span>meth:<a href="../Piaf__/index.html#module-Method">Piaf__.Method</a>.t</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val</span> head : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-post"><a href="#val-post" class="anchor"></a><code><span class="keyword">val</span> post : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-put"><a href="#val-put" class="anchor"></a><code><span class="keyword">val</span> put : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span class="keyword">val</span> patch : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt><dt class="spec value" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span class="keyword">val</span> delete : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;headers:<span><span>(<a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.name * <a href="../Piaf__/index.html#module-Headers">Piaf__.Headers</a>.value)</span> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;body:<a href="../Piaf/Body/index.html#type-t">Piaf.Body.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(<a href="../Piaf/Response/index.html#type-t">Piaf.Response.t</a>, <a href="../Piaf/Error/index.html#type-t">Piaf.Error.t</a>)</span> <a href="../Piaf__Monads/Lwt_result/index.html#type-t">Piaf__Monads.Lwt_result.t</a></span></code></dt></dl><div class="spec module" id="module-Oneshot"><a href="#module-Oneshot" class="anchor"></a><code><span class="keyword">module</span> <a href="Oneshot/index.html">Oneshot</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>
